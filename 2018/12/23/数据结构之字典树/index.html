<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Cydeer">
  <!-- Open Graph Data -->
  <meta property="og:title" content="数据结构之字典树"/>
  <meta property="og:description" content="不同的生活,带来不同的际遇,福祸好歹,终会积累成经历的一种,脚步匆匆,只是不知下一站会在哪里... 一切只是开始,一切也终将继续" />
  <meta property="og:site_name" content="下个路口见"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://www.merlin4io.comundefined"/>
  
  
    <link rel="icon" href="/favicon.png">
  

  <!-- Site Title -->
  <title>下个路口见</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">数据结构之字典树</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By Cydeer</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2018年12月23日</span>
            <span class="time">23:16:54</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/杂七杂八/">杂七杂八</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/数据结构/">#数据结构</a> <a class="tag" href="/tags/字典树/">#字典树</a> <a class="tag" href="/tags/布隆过滤/">#布隆过滤</a> <a class="tag" href="/tags/Trie树/">#Trie树</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>谈到数据结构，最终必然会涉及到树，树形数据结构是一种高级非线性数据结构，其中最重要的树就是二叉树。其特殊的层次结构在计算机中扮演了非常重要的地位，其一些重要的算法和高性能的系统几乎都采用了树形结构。今天介绍的字典树也是树的一种。常用于词频统计，分词查找。<br><a id="more"></a></p>
<h3 id="字典树简介"><a href="#字典树简介" class="headerlink" title="字典树简介"></a>字典树简介</h3><p>Tire树称为字典树，又称单词查找树，Trie树，是一种树形结构，是一种哈希树的变种。典型应用是用于统计，排序和保存大量的字符串（但不仅限于字符串），所以经常被搜索引擎系统用于文本词频统计。它的优点是：<strong>利用字符串的公共前缀来减少查询时间，最大限度地减少无谓的字符串比较，查询效率比哈希树高。</strong></p>
<h3 id="字典树的特征"><a href="#字典树的特征" class="headerlink" title="字典树的特征"></a>字典树的特征</h3><ol>
<li>根节点不包含字符，除根节点外每一个节点都只包含一个字符；</li>
<li>从根节点到某一节点，路径上经过的字符连接起来，为该节点对应的字符串；</li>
<li>每个节点的所有子节点包含的字符都不相同。</li>
</ol>
<h3 id="字典树示例图"><a href="#字典树示例图" class="headerlink" title="字典树示例图"></a>字典树示例图</h3><p><img src="/2018/12/23/数据结构之字典树/trieTree.png" alt="字典树示例图"></p>
<h3 id="一个问题"><a href="#一个问题" class="headerlink" title="一个问题"></a>一个问题</h3><p>如何在百万级别的单词库中判断一个单词是否存在？</p>
<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><p>把所有的单词按照字典说的方式存储，每一层的度最大为26，树的深度为最长单词的字符数量，每个节点存储单词的一个字符，最后查找的时候，从根节点开始往下查找，然后一层一层下去，直到找到这个单词或者该层没有单词的对应字符，则返回未找到。</p>
<h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrieTree</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 每个节点的数据</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * 存储的数据</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keyword">char</span> data;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * 是否是最后一个单词</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        <span class="keyword">boolean</span> isEnd;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line"><span class="comment">         * 节点的子节点</span></div><div class="line"><span class="comment">         */</span></div><div class="line">        TreeNode[] childes;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">getData</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> data;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(<span class="keyword">char</span> data)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.data = data;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnd</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> isEnd;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEnd</span><span class="params">(<span class="keyword">boolean</span> end)</span> </span>&#123;</div><div class="line">            isEnd = end;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> TreeNode[] getChildes() &#123;</div><div class="line">            <span class="keyword">return</span> childes;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChildes</span><span class="params">(TreeNode[] childes)</span> </span>&#123;</div><div class="line">            <span class="keyword">this</span>.childes = childes;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="comment">// 默认不是最后一个节点</span></div><div class="line">            <span class="keyword">this</span>.isEnd = <span class="keyword">false</span>;</div><div class="line">            <span class="comment">// 最多26个子节点</span></div><div class="line">            childes = <span class="keyword">new</span> TreeNode[<span class="number">26</span>];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * 存储单词</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> treeNode 根节点</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> word     要插入的单词</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(TreeNode treeNode, String word)</span> </span>&#123;</div><div class="line">        <span class="comment">// 都按照小写来存储</span></div><div class="line">        word = word.toLowerCase();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> data : word.toCharArray()) &#123;</div><div class="line">            <span class="comment">// char - 'a' 自后恰好是数组的下标</span></div><div class="line">            <span class="keyword">int</span> pos = data - <span class="string">'a'</span>;</div><div class="line">            <span class="keyword">if</span> (treeNode.childes[pos] == <span class="keyword">null</span>) &#123;</div><div class="line">                treeNode.childes[pos] = <span class="keyword">new</span> TreeNode();</div><div class="line">                treeNode.childes[pos].data = data;</div><div class="line">            &#125;</div><div class="line">            treeNode = treeNode.childes[pos];</div><div class="line">        &#125;</div><div class="line">        treeNode.isEnd = <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> treeNode 根节点</span></div><div class="line"><span class="comment">     * <span class="doctag">@param</span> word     要查询的单词</span></div><div class="line"><span class="comment">     * <span class="doctag">@return</span> 单词库中是否存在改单词</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">find</span><span class="params">(TreeNode treeNode, String word)</span> </span>&#123;</div><div class="line">        word = word.toLowerCase();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">char</span> data : word.toCharArray()) &#123;</div><div class="line">            <span class="keyword">int</span> pos = data - <span class="string">'a'</span>;</div><div class="line">            <span class="keyword">if</span> (treeNode.childes[pos] == <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">            treeNode = treeNode.childes[pos];</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> treeNode.isEnd;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        TreeNode root = <span class="keyword">new</span> TreeNode();</div><div class="line">        String[] words = &#123;<span class="string">"apple"</span>, <span class="string">"app"</span>, <span class="string">"bus"</span>, <span class="string">"bank"</span>, <span class="string">"good"</span>, <span class="string">"goodBye"</span>, <span class="string">"css"</span>&#125;;</div><div class="line">        <span class="keyword">for</span> (String word : words) &#123;</div><div class="line">            insert(root, word);</div><div class="line">        &#125;</div><div class="line">        System.out.println(find(root, <span class="string">"app"</span>));</div><div class="line">        System.out.println(find(root, <span class="string">"appl"</span>));</div><div class="line">        System.out.println(find(root, <span class="string">"goodb"</span>));</div><div class="line">        System.out.println(find(root, <span class="string">"goodbye"</span>));</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>看完源码，是不是觉得很简单？没错，本来就这么简单。</p>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>其实还有一种方式来解决这个问题，布隆过滤，应该有很多人听过这个，其实实现也不是很复杂，有兴趣的可以去搜索一下，只是布隆过滤这种方式存在一定的误差，并不是很完美。</p>
<h3 id="问题变种"><a href="#问题变种" class="headerlink" title="问题变种"></a>问题变种</h3><p>如何在千万级别的手机号码库中判断一个手机号是否存在？<br>如何统计以a开头的单词的数量？</p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

